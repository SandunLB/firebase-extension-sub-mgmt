document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("login-button"),t=document.getElementById("logout-button"),n=document.getElementById("user-info"),i=document.getElementById("login-container"),s=document.getElementById("user-name"),o=document.getElementById("user-email"),a=document.getElementById("user-avatar"),c=document.getElementById("status-message"),d=document.getElementById("subscription-status"),l=document.getElementById("subscription-options"),u=document.getElementById("monthly-plan"),m=document.getElementById("yearly-plan"),r=document.getElementById("lifetime-plan");function g(e){e?(s.textContent=e.displayName,o.textContent=e.email,a.src=e.photoURL||"default-avatar.png",n.style.display="block",i.style.display="none"):(n.style.display="none",i.style.display="block",d.textContent="Checking...")}function y(e){c.textContent="Initiating subscription...",chrome.runtime.sendMessage({action:"initiateSubscription",plan:e})}e.addEventListener("click",(()=>{chrome.runtime.sendMessage({action:"signIn"})})),t.addEventListener("click",(()=>{chrome.runtime.sendMessage({action:"signOut"})})),u.addEventListener("click",(()=>y("monthly"))),m.addEventListener("click",(()=>y("yearly"))),r.addEventListener("click",(()=>y("lifetime"))),chrome.runtime.onMessage.addListener(((e,t,n)=>{var i,s;"signInResult"===e.action?e.success?(g(e.user),s=e.user.uid,chrome.runtime.sendMessage({action:"checkSubscription",uid:s})):c.textContent="Sign-in failed. Please try again.":"signOutResult"===e.action?e.success?g(null):c.textContent="Sign-out failed. Please try again.":"subscriptionStatus"===e.action&&(i=e.status,d.textContent=i?`Active (${i.plan})`:"Inactive",l.style.display=i?"none":"block")})),chrome.runtime.sendMessage({action:"getAuthState"})}));