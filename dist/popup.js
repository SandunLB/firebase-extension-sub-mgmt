document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("login-button"),t=document.getElementById("logout-button"),n=document.getElementById("user-info"),o=document.getElementById("login-container"),s=document.getElementById("user-name"),i=document.getElementById("user-email"),a=document.getElementById("last-login"),l=document.getElementById("user-avatar"),d=document.getElementById("status-message");function r(e){e?(s.textContent=e.displayName,i.textContent=e.email,a.textContent=e.lastLogin?new Date(e.lastLogin).toLocaleString():"N/A",l.src=e.photoURL||"default-avatar.png",n.style.display="block",o.style.display="none"):(n.style.display="none",o.style.display="block")}e.addEventListener("click",(()=>{d.textContent="Signing in...",chrome.runtime.sendMessage({action:"signIn"})})),t.addEventListener("click",(()=>{d.textContent="Signing out...",chrome.runtime.sendMessage({action:"signOut"})})),chrome.runtime.onMessage.addListener(((e,t,n)=>{"signInResult"===e.action?e.success?(r(e.user),d.textContent="Signed in successfully!"):(console.error("Sign-in error:",e.error),d.textContent="Sign-in failed. Please try again."):"signOutResult"===e.action&&(e.success?(r(null),d.textContent="Signed out successfully!"):(console.error("Sign-out error:",e.error),d.textContent="Sign-out failed. Please try again."))})),chrome.runtime.sendMessage({action:"getAuthState"})}));